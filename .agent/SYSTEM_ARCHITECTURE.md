# ğŸ›ï¸ Grodify - System Architecture

## ğŸ“ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                          â”‚
â”‚                    (Next.js 14 App Router)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   Homepage   â”‚  â”‚  Categories  â”‚  â”‚     Cart     â”‚        â”‚
â”‚  â”‚  (Dynamic)   â”‚  â”‚   (Filter)   â”‚  â”‚  (Checkout)  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   Profile    â”‚  â”‚    Orders    â”‚  â”‚  Downloads   â”‚        â”‚
â”‚  â”‚   (Auth)     â”‚  â”‚  (History)   â”‚  â”‚   (Files)    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      STATE MANAGEMENT                           â”‚
â”‚                        (MobX Stores)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Auth   â”‚ â”‚  Flyers  â”‚ â”‚   Cart   â”‚ â”‚ Banners  â”‚         â”‚
â”‚  â”‚  Store   â”‚ â”‚  Store   â”‚ â”‚  Store   â”‚ â”‚  Store   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Category â”‚ â”‚   Form   â”‚ â”‚ Loading  â”‚ â”‚Favorites â”‚         â”‚
â”‚  â”‚  Store   â”‚ â”‚  Store   â”‚ â”‚  Store   â”‚ â”‚  Store   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      EXTERNAL SERVICES                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ AWS Cognito  â”‚  â”‚    Stripe    â”‚  â”‚  Backend API â”‚        â”‚
â”‚  â”‚    (Auth)    â”‚  â”‚  (Payments)  â”‚  â”‚  (Database)  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚   AWS S3     â”‚  â”‚    Google    â”‚                           â”‚
â”‚  â”‚  (Storage)   â”‚  â”‚    OAuth     â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Architecture

### User Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. Login/Register
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AuthStore     â”‚
â”‚   (Frontend)    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. Authenticate
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AWS Cognito    â”‚
â”‚  (Auth Service) â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 3. Return JWT Token
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AuthStore     â”‚
â”‚ (Store Token)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 4. Register User
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend API    â”‚
â”‚  (Database)     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 5. User Data
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AuthStore     â”‚
â”‚  (Update State) â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 6. Render UI
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User   â”‚
â”‚ (Logged) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Flyer Browsing Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User   â”‚
â”‚ (Browse) â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. Visit Homepage
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FlyersStore    â”‚
â”‚ (Check Cache)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. Fetch Flyers
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend API    â”‚
â”‚ GET /api/flyers â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 3. Return Flyers Array
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FlyersStore    â”‚
â”‚ (Store Data)    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 4. Extract Categories
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚getDynamicCats() â”‚
â”‚   (Helper)      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 5. Category Objects
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   HomePage      â”‚
â”‚ (Render Cats)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 6. For Each Category
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FlyersSection   â”‚
â”‚ (Filter Flyers) â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 7. Display Flyers
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FlyersCarousel  â”‚
â”‚  (Show Cards)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 8. Render Cards
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User   â”‚
â”‚  (View)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Shopping Cart Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User   â”‚
â”‚(Customize)â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. Fill Form
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FlyerFormStore  â”‚
â”‚ (Form Data)     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. Add to Cart
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CartStore     â”‚
â”‚ (Prepare Data)  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 3. POST FormData
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend API    â”‚
â”‚ /api/cart/add   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 4. Save to DB
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Database      â”‚
â”‚ (Cart Items)    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 5. Return Success
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CartStore     â”‚
â”‚ (Reload Cart)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 6. GET /api/cart/{userId}
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend API    â”‚
â”‚ (Fetch Cart)    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 7. Cart Items
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CartStore     â”‚
â”‚ (Update State)  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 8. Update UI
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header  â”‚
â”‚ (Count)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Payment Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User   â”‚
â”‚(Checkout)â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. Click Checkout
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Checkout Page   â”‚
â”‚ (Review Cart)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. Confirm Order
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend API    â”‚
â”‚ (Create Session)â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 3. Create Checkout
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Stripe      â”‚
â”‚ (Payment Page)  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 4. Process Payment
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Stripe      â”‚
â”‚ (Charge Card)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 5. Payment Success
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend API    â”‚
â”‚ (Create Order)  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 6. Save Order
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Database      â”‚
â”‚   (Orders)      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 7. Redirect to Success
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User   â”‚
â”‚(Download)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ Component Hierarchy

```
App (Root Layout)
â”‚
â”œâ”€â”€ AuthProvider
â”‚   â””â”€â”€ StoreProvider
â”‚       â”‚
â”‚       â”œâ”€â”€ Header
â”‚       â”‚   â”œâ”€â”€ Logo (Link to /)
â”‚       â”‚   â”œâ”€â”€ SearchBar
â”‚       â”‚   â”œâ”€â”€ Navigation Links
â”‚       â”‚   â”œâ”€â”€ CartIcon (with count)
â”‚       â”‚   â””â”€â”€ UserMenu
â”‚       â”‚       â”œâ”€â”€ Login/Register (if not logged in)
â”‚       â”‚       â””â”€â”€ Profile/Logout (if logged in)
â”‚       â”‚
â”‚       â”œâ”€â”€ Page Content (varies by route)
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ HomePage
â”‚       â”‚   â”‚   â”œâ”€â”€ HeroSection (Banner Carousel)
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ Banner Image
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ Banner Text
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ CTA Button (conditional)
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ Navigation Arrows
â”‚       â”‚   â”‚   â”‚
â”‚       â”‚   â”‚   â””â”€â”€ FlyersSection (for each category)
â”‚       â”‚   â”‚       â”œâ”€â”€ Category Header
â”‚       â”‚   â”‚       â”œâ”€â”€ View All Link
â”‚       â”‚   â”‚       â””â”€â”€ FlyersCarousel
â”‚       â”‚   â”‚           â””â”€â”€ FlyerCard (multiple)
â”‚       â”‚   â”‚               â”œâ”€â”€ Flyer Image
â”‚       â”‚   â”‚               â”œâ”€â”€ Flyer Title
â”‚       â”‚   â”‚               â”œâ”€â”€ Price Badge
â”‚       â”‚   â”‚               â””â”€â”€ Quick View Button
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ CategoriesPage
â”‚       â”‚   â”‚   â”œâ”€â”€ FilterBar
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ Price Filters
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ Category Selector
â”‚       â”‚   â”‚   â”‚
â”‚       â”‚   â”‚   â””â”€â”€ FlyerGrid
â”‚       â”‚   â”‚       â””â”€â”€ FlyerCard (multiple)
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ FlyerDetailPage
â”‚       â”‚   â”‚   â”œâ”€â”€ Flyer Image Gallery
â”‚       â”‚   â”‚   â”œâ”€â”€ Flyer Info
â”‚       â”‚   â”‚   â”œâ”€â”€ Price Display
â”‚       â”‚   â”‚   â””â”€â”€ Customization Form
â”‚       â”‚   â”‚       â”œâ”€â”€ Event Details
â”‚       â”‚   â”‚       â”œâ”€â”€ DJ/Host Upload
â”‚       â”‚   â”‚       â”œâ”€â”€ Sponsor Upload
â”‚       â”‚   â”‚       â”œâ”€â”€ Add-ons Selection
â”‚       â”‚   â”‚       â””â”€â”€ Add to Cart Button
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ CartPage
â”‚       â”‚   â”‚   â”œâ”€â”€ Cart Items List
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ CartItem (multiple)
â”‚       â”‚   â”‚   â”‚       â”œâ”€â”€ Item Preview
â”‚       â”‚   â”‚   â”‚       â”œâ”€â”€ Item Details
â”‚       â”‚   â”‚   â”‚       â”œâ”€â”€ Price
â”‚       â”‚   â”‚   â”‚       â””â”€â”€ Remove Button
â”‚       â”‚   â”‚   â”‚
â”‚       â”‚   â”‚   â”œâ”€â”€ Cart Summary
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ Subtotal
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ Total
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ Checkout Button
â”‚       â”‚   â”‚   â”‚
â”‚       â”‚   â”‚   â””â”€â”€ Empty Cart Message
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ CheckoutPage
â”‚       â”‚   â”‚   â”œâ”€â”€ Order Review
â”‚       â”‚   â”‚   â”œâ”€â”€ Payment Form (Stripe)
â”‚       â”‚   â”‚   â””â”€â”€ Place Order Button
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ OrdersPage
â”‚       â”‚   â”‚   â””â”€â”€ OrderCard (multiple)
â”‚       â”‚   â”‚       â”œâ”€â”€ Order Details
â”‚       â”‚   â”‚       â”œâ”€â”€ Status Badge
â”‚       â”‚   â”‚       â””â”€â”€ Download Button
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â”€ ProfilePage
â”‚       â”‚       â”œâ”€â”€ User Info
â”‚       â”‚       â”œâ”€â”€ Edit Profile Form
â”‚       â”‚       â””â”€â”€ Change Password
â”‚       â”‚
â”‚       â””â”€â”€ Footer
â”‚           â”œâ”€â”€ Logo
â”‚           â”œâ”€â”€ Quick Links
â”‚           â”œâ”€â”€ Legal Links
â”‚           â””â”€â”€ Social Media
â”‚
â””â”€â”€ Toaster (Notifications)
```

---

## ğŸª Store Dependencies

```
StoreProvider
â”‚
â”œâ”€â”€ AuthStore (Independent)
â”‚   â””â”€â”€ Used by: All pages requiring auth
â”‚
â”œâ”€â”€ FlyersStore (Independent)
â”‚   â””â”€â”€ Used by: HomePage, CategoriesPage, FlyerDetailPage
â”‚
â”œâ”€â”€ CategoryStore (Depends on FlyersStore)
â”‚   â””â”€â”€ Used by: CategoriesPage, FilterBar
â”‚
â”œâ”€â”€ CartStore (Depends on AuthStore)
â”‚   â””â”€â”€ Used by: Header, CartPage, CheckoutPage
â”‚
â”œâ”€â”€ BannerStore (Independent)
â”‚   â””â”€â”€ Used by: HeroSection
â”‚
â”œâ”€â”€ FlyerFormStore (Independent)
â”‚   â””â”€â”€ Used by: FlyerDetailPage, Customization Form
â”‚
â”œâ”€â”€ LoadingStore (Independent)
â”‚   â””â”€â”€ Used by: Global loading overlay
â”‚
â”œâ”€â”€ FilterBarStore (Independent)
â”‚   â””â”€â”€ Used by: CategoriesPage, FilterBar
â”‚
â””â”€â”€ FavoritesStore (Depends on AuthStore)
    â””â”€â”€ Used by: FlyerCard, FavoritesPage
```

---

## ğŸ”Œ API Integration Points

```
Frontend (Next.js)
â”‚
â”œâ”€â”€ Authentication
â”‚   â”œâ”€â”€ AWS Cognito (Direct)
â”‚   â”‚   â”œâ”€â”€ signIn()
â”‚   â”‚   â”œâ”€â”€ signUp()
â”‚   â”‚   â”œâ”€â”€ signOut()
â”‚   â”‚   â”œâ”€â”€ resetPassword()
â”‚   â”‚   â””â”€â”€ signInWithRedirect()
â”‚   â”‚
â”‚   â””â”€â”€ Backend API
â”‚       â””â”€â”€ POST /api/web/auth/register
â”‚           (Auto-register after Cognito auth)
â”‚
â”œâ”€â”€ Flyers
â”‚   â””â”€â”€ Backend API
â”‚       â””â”€â”€ GET /api/flyers
â”‚           (Fetch all flyers with categories)
â”‚
â”œâ”€â”€ Banners
â”‚   â””â”€â”€ Backend API
â”‚       â””â”€â”€ GET /api/banners
â”‚           (Fetch promotional banners)
â”‚
â”œâ”€â”€ Cart
â”‚   â””â”€â”€ Backend API
â”‚       â”œâ”€â”€ GET /api/cart/{userId}
â”‚       â”œâ”€â”€ POST /api/cart/add
â”‚       â”œâ”€â”€ DELETE /api/cart/remove/{itemId}
â”‚       â””â”€â”€ DELETE /api/cart/clear/{userId}
â”‚
â”œâ”€â”€ Orders
â”‚   â””â”€â”€ Backend API
â”‚       â”œâ”€â”€ GET /api/orders/{userId}
â”‚       â”œâ”€â”€ POST /api/orders/create
â”‚       â””â”€â”€ GET /api/orders/{orderId}/download
â”‚
â”œâ”€â”€ Payments
â”‚   â””â”€â”€ Stripe (Direct)
â”‚       â”œâ”€â”€ createCheckoutSession()
â”‚       â””â”€â”€ handlePaymentSuccess()
â”‚
â””â”€â”€ File Uploads
    â””â”€â”€ AWS S3 (via Backend)
        â””â”€â”€ POST /api/upload
            (Upload images for customization)
```

---

## ğŸ¨ UI Component Library Structure

```
components/
â”‚
â”œâ”€â”€ ui/ (Radix UI + Custom)
â”‚   â”œâ”€â”€ Buttons
â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â””â”€â”€ toggle.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ Forms
â”‚   â”‚   â”œâ”€â”€ input.tsx
â”‚   â”‚   â”œâ”€â”€ textarea.tsx
â”‚   â”‚   â”œâ”€â”€ select.tsx
â”‚   â”‚   â”œâ”€â”€ checkbox.tsx
â”‚   â”‚   â”œâ”€â”€ radio-group.tsx
â”‚   â”‚   â””â”€â”€ switch.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ Layout
â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”œâ”€â”€ separator.tsx
â”‚   â”‚   â”œâ”€â”€ scroll-area.tsx
â”‚   â”‚   â””â”€â”€ tabs.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ Overlays
â”‚   â”‚   â”œâ”€â”€ dialog.tsx
â”‚   â”‚   â”œâ”€â”€ popover.tsx
â”‚   â”‚   â”œâ”€â”€ dropdown-menu.tsx
â”‚   â”‚   â”œâ”€â”€ alert-dialog.tsx
â”‚   â”‚   â””â”€â”€ toast.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ Feedback
â”‚   â”‚   â”œâ”€â”€ badge.tsx
â”‚   â”‚   â”œâ”€â”€ progress.tsx
â”‚   â”‚   â”œâ”€â”€ ios-loader.tsx (Custom)
â”‚   â”‚   â””â”€â”€ sonner.tsx
â”‚   â”‚
â”‚   â””â”€â”€ Navigation
â”‚       â”œâ”€â”€ navigation-menu.tsx
â”‚       â”œâ”€â”€ menubar.tsx
â”‚       â””â”€â”€ breadcrumb.tsx
â”‚
â”œâ”€â”€ layout/
â”‚   â”œâ”€â”€ header.tsx
â”‚   â””â”€â”€ footer.tsx
â”‚
â”œâ”€â”€ home/
â”‚   â”œâ”€â”€ HeroSection.tsx
â”‚   â”œâ”€â”€ FlyersSection.tsx
â”‚   â”œâ”€â”€ FlyersCarousel.tsx
â”‚   â””â”€â”€ FeaturedCategories.tsx
â”‚
â”œâ”€â”€ flyer/
â”‚   â””â”€â”€ flyer-card.tsx
â”‚
â”œâ”€â”€ auth/
â”‚   â””â”€â”€ user-menu.tsx
â”‚
â”œâ”€â”€ cart/
â”‚   â””â”€â”€ cart-item.tsx
â”‚
â””â”€â”€ order/
    â””â”€â”€ order-card.tsx
```

---

## ğŸ”’ Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Security Layers               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  1. Authentication (AWS Cognito)        â”‚
â”‚     â”œâ”€â”€ JWT Token Validation            â”‚
â”‚     â”œâ”€â”€ Session Management              â”‚
â”‚     â””â”€â”€ OAuth 2.0 / OIDC                â”‚
â”‚                                         â”‚
â”‚  2. Authorization (Backend)             â”‚
â”‚     â”œâ”€â”€ User ID Verification            â”‚
â”‚     â”œâ”€â”€ Resource Ownership Check        â”‚
â”‚     â””â”€â”€ Role-based Access Control       â”‚
â”‚                                         â”‚
â”‚  3. Data Protection                     â”‚
â”‚     â”œâ”€â”€ HTTPS Only                      â”‚
â”‚     â”œâ”€â”€ Secure Cookie Storage           â”‚
â”‚     â””â”€â”€ Environment Variables           â”‚
â”‚                                         â”‚
â”‚  4. Payment Security (Stripe)           â”‚
â”‚     â”œâ”€â”€ PCI Compliance                  â”‚
â”‚     â”œâ”€â”€ Tokenized Payments              â”‚
â”‚     â””â”€â”€ 3D Secure                       â”‚
â”‚                                         â”‚
â”‚  5. File Upload Security                â”‚
â”‚     â”œâ”€â”€ File Type Validation            â”‚
â”‚     â”œâ”€â”€ Size Limits                     â”‚
â”‚     â””â”€â”€ S3 Bucket Policies              â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š State Management Flow

```
User Action
    â”‚
    â–¼
Component Event Handler
    â”‚
    â–¼
Store Method Call
    â”‚
    â”œâ”€â”€â”€ API Call (if needed)
    â”‚    â”‚
    â”‚    â–¼
    â”‚    Backend API
    â”‚    â”‚
    â”‚    â–¼
    â”‚    Response
    â”‚
    â–¼
runInAction() - Update Observable State
    â”‚
    â–¼
MobX Reaction - Detect Changes
    â”‚
    â–¼
Re-render Observer Components
    â”‚
    â–¼
Updated UI
```

---

## ğŸŒ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Production Environment          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Frontend (Next.js)                     â”‚
â”‚  â”œâ”€â”€ Vercel / AWS / Custom Server      â”‚
â”‚  â”œâ”€â”€ CDN for Static Assets             â”‚
â”‚  â””â”€â”€ Environment Variables              â”‚
â”‚                                         â”‚
â”‚  Backend API                            â”‚
â”‚  â”œâ”€â”€ Node.js Server                     â”‚
â”‚  â”œâ”€â”€ Database (MySQL/PostgreSQL)        â”‚
â”‚  â””â”€â”€ IP: 193.203.161.174:3007          â”‚
â”‚                                         â”‚
â”‚  AWS Services                           â”‚
â”‚  â”œâ”€â”€ Cognito (Authentication)           â”‚
â”‚  â”œâ”€â”€ S3 (File Storage)                  â”‚
â”‚  â””â”€â”€ CloudFront (CDN)                   â”‚
â”‚                                         â”‚
â”‚  Stripe                                 â”‚
â”‚  â””â”€â”€ Payment Processing                 â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Last Updated:** December 6, 2025  
**For detailed code analysis:** See `PROJECT_ANALYSIS.md`  
**For quick reference:** See `QUICK_PROJECT_REFERENCE.md`
